{% extends 'admin_panel/base.html' %}

{% block title %}API Dashboard Statistics - Hotel Admin{% endblock %}
{% block page_title %}API Dashboard Statistics{% endblock %}

{% block content %}
    <div class="container dashboard-container">
        <div class="page-title">
            <h1><i class="fas fa-chart-line"></i> API Dashboard Statistics</h1>
            <p class="lead">Real-time hotel management system metrics</p>
        </div>

        <!-- API Endpoint Information -->
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="api-endpoint">
                    <h5 class="text-white"><i class="fas fa-code"></i> API Endpoint</h5>
                    <code>GET /admin/api/dashboard-stats/</code>
                    <p class="text-light mt-2 mb-0">Provides real-time statistics for the hotel management dashboard</p>
                </div>
            </div>
        </div>

        <!-- Statistics Display -->
        <div class="row justify-content-center">
            <div class="col-md-10">
                <div class="stats-card">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h2 class="text-primary mb-0"><i class="fas fa-tachometer-alt"></i> Dashboard Statistics</h2>
                        <button class="btn refresh-btn" onclick="refreshStats()">
                            <i class="fas fa-sync-alt"></i> Refresh Data
                        </button>
                    </div>

                    <div class="loading-spinner">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        <p class="mt-2 text-muted">Fetching latest statistics...</p>
                    </div>

                    <div class="row" id="statsContainer">
                        <div class="col-md-3">
                            <div class="stat-item">
                                <div class="stat-icon">
                                    <i class="fas fa-calendar-check"></i>
                                </div>
                                <div class="stat-number" id="totalBookings">-</div>
                                <div class="stat-label">Total Bookings</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stat-item">
                                <div class="stat-icon">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="stat-number" id="activeBookings">-</div>
                                <div class="stat-label">Active Bookings</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stat-item">
                                <div class="stat-icon">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </div>
                                <div class="stat-number" id="pendingGrievances">-</div>
                                <div class="stat-label">Pending Grievances</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stat-item">
                                <div class="stat-icon">
                                    <i class="fas fa-bed"></i>
                                </div>
                                <div class="stat-number" id="availableRooms">-</div>
                                <div class="stat-label">Available Rooms</div>
                            </div>
                        </div>
                    </div>

                    <div class="last-updated" id="lastUpdated">
                        Last updated: Never
                    </div>
                </div>
            </div>
        </div>

        <!-- JSON Response Display -->
        <div class="row justify-content-center">
            <div class="col-md-10">
                <div class="stats-card">
                    <h3 class="text-primary mb-3"><i class="fas fa-code"></i> JSON Response</h3>
                    <div class="bg-dark p-3 rounded">
                        <pre id="jsonResponse" style="color: #28a745; margin: 0; white-space: pre-wrap;">
{
    "total_bookings": 0,
    "active_bookings": 0,
    "pending_grievances": 0,
    "available_rooms": 0
}
                        </pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- API Usage Instructions -->
        <div class="row justify-content-center">
            <div class="col-md-10">
                <div class="stats-card">
                    <h3 class="text-primary mb-3"><i class="fas fa-book"></i> API Usage Instructions</h3>
                    <div class="row">
                        <div class="col-md-6">
                            <h5 class="text-secondary">Authentication Required</h5>
                            <ul class="list-unstyled">
                                <li><i class="fas fa-check text-success"></i> User must be logged in</li>
                                <li><i class="fas fa-check text-success"></i> Admin role required</li>
                                <li><i class="fas fa-check text-success"></i> CSRF exempt endpoint</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h5 class="text-secondary">Response Format</h5>
                            <ul class="list-unstyled">
                                <li><i class="fas fa-info-circle text-info"></i> Content-Type: application/json</li>
                                <li><i class="fas fa-info-circle text-info"></i> HTTP Status: 200 OK</li>
                                <li><i class="fas fa-info-circle text-info"></i> Real-time data</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}